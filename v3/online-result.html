<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="https://cdn.glitch.com/bf81f2d6-8438-4fda-b1ed-5c95421f0aec%2Ffavicon.ico" />

    <title>Auswertung | openRätsel</title>
    <link rel="stylesheet" href="/style.css" />
    <script src="/v3/script.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-analytics.js"></script>
    <script>
    var firebaseConfig = {
      apiKey: "AIzaSyDBJz_TZ68OMTs7vV9cJYg4bYOwjSLJrag",
      authDomain: "openraetsel.firebaseapp.com",
      databaseURL: "https://openraetsel-default-rtdb.europe-west1.firebasedatabase.app/",
      projectId: "openraetsel",
      storageBucket: "openraetsel.appspot.com",
      messagingSenderId: "663157303897",
      appId: "1:663157303897:web:d7a612ef9062091ce59f48",
      measurementId: "G-SYVJG1XY3V"
    };
    firebase.initializeApp(firebaseConfig);
    </script>
  </head>
  <body>
    <!-- the wrapper and content divs set margins and positioning -->
    <script>sessionCheck()</script>
    <div class="wrapper">
      <div class="content" role="main">
        <!-- this is the start of content for our page -->
        <h1 id="note" class="title">...</h1>
        <h1 id="titlemsg" class="title">...</h1><br>
        <p id="more">
          ...
        </p>
        <p>
          <a href="/v3">Neues Quiz starten</a>
        </p>
      </div>
    </div>
    <script>
      try {
        more.innerHTML = "Du hast in '"+decodeURI(getQuerys()["gn"])+"' "+getQuerys()["points"]+" von "+getQuerys()["avalible"]+" Punten erreicht!"
        p = (getQuerys()["points"] / getQuerys()["avalible"])*100
        console.log(p)
        if(p>=0){titlemsg.innerHTML="Ungenügend";note.innerHTML="6"}
        setTimeout('if(p>=2){titlemsg.innerHTML="Mangelhaft";note.innerHTML="5"}', 250)
        setTimeout('if(p>=15){titlemsg.innerHTML="Ausreichend";note.innerHTML="4"}', 500)
        setTimeout('if(p>=30){titlemsg.innerHTML="Befriedigend";note.innerHTML="3"}', 750)
        setTimeout('if(p>=70){titlemsg.innerHTML="Gut";note.innerHTML="2"}', 1000)
        setTimeout('if(p>=85){titlemsg.innerHTML="Sehr Gut";note.innerHTML="1"}', 1250)
        setTimeout('if(p>=100){titlemsg.innerHTML="Perfekt";note.innerHTML="1+"}', 1500)
        var h = new Date()
        setTimeout('firebase.database().ref("/game/"+getQuerys()["game"].replace("[", "").replace("$", "").replace("]", "").replace("#", "")+"/results/"+getQuerys()["name"]+"-"+Date.now()).set({"points":getQuerys()["points"]+"/"+getQuerys()["avalible"], "time":Date.now(), "date":h.getDate() + "." + (h.getMonth() + 1) + "." + h.getFullYear(), "note":titlemsg.innerHTML+" "+note.innerHTML, "name":getQuerys()["name"]})', 1600)
      } catch(e){window.location.href = '/v3/crashed.html#:'+Date.now()+':#e!'+e.stack}
    </script>
  </body>
</html>
